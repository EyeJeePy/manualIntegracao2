<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VX Consult - Manual de Integra√ß√£o</title>
</head>
<style>
    body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        line-height: 1;
        margin: 40px;
        background-color: whitesmoke;
        color: #123625;
    }

    h1,
    h2,
    h3 {
        color: #123625;
    }

    hr {
        color: white;
    }

    .codigo {
        color: #123625;
        ;
        width: fit-content;
        padding-right: 8rem;
        border-radius: 10px;
    }

    .bloco {
        margin-left: 2rem;
        padding-left: 1rem;
        border-left: 5px solid rgb(156, 162, 38);
    }

    .logovx {
        width: 20rem;
        text-align: center;
    }
</style>

<body>
    <div style="margin-top: 3rem; margin-bottom: 3rem; display: flex; justify-content: left; align-items: center;">
        <img class="logovx" src="logovx.png" alt="">
    </div>
    <div>
        <h1>Manual de Consulta e Laudo de Motoristas Aut√¥nomos - VX Consult</h1>
        <p>VERS√ÉO 06/01/2026</p>
        </p>
    </div>
    <hr> 
<!-- --- -->
    <div>
        <h2>Status de Pesquisa:</h2>
    <ul>
        <li>Criada</li>
        <li>Aberta - Aguardando Operador</li>
        <li>Em An√°lise</li>
        <li>Em An√°lise - Supervisor</li>
        <li>Conclu√≠do</li>
        <li>Pesquisa Insuficiente</li>
        <li>Arquivada/Vencida</li>
        <li>Aguardando Motorista</li>
        <li>Pesquisa Pendente</li>
        <li>Aguardando Contato</li>
        <li>Aguardando apenas biometria</li>
    </ul>
    </div>
<hr>
<!-- --- -->
    <div>
        <h2>URL base:</h2>
        <p>https://api-hml.vxconsult.com.br/</p>
    </div><br>

    <div>
        <h2><strong>üîé Busca de Pesquisas do Motorista por CPF:</strong></h2>
        <p><strong>[POST]</strong> /api/users-permissions/consultar</p>
        <br>
        <h4>Campo (JSON):</h4>
        <p>cpf</p>
        <br>
        <h4>Exemplo 1Ô∏è‚É£:</h4>
        <div class="codigo">
            <pre><code>
{
    "cpf": "378.304.448-03"
}
                </code></pre>
        </div>
        <br>
        <h4>Exemplo de resposta 1Ô∏è‚É£:</h4>
        <div class="codigo">
            <pre><code>
{
    "data": {
        "pesquisas": [
            {
                "id": "189371",
                "cpf": "378.304.448-03",
                "data_pesquisa": "2025-05-22T15:38:12-03:00",
                "autorizacao_s3": "https://s3.sa-east-1.amazonaws.com/vx-consult-bucket-plataforma/pesquisas/autorizacao-189371.pdf",
                "status": "Conclu√≠do",
                "cavalo_placa": "AAA0000",
                "carreta1_placa": null,
                "carreta2_placa": null,
                "carreta3_placa": null,
                "perfil": "Aut√¥nomo",
                "validade": "2025-08-21T15:38:12-03:00",
                "dentro_validade": true,
                "dias_expirar": 7862400000,
                "pagina_renova": "https://plataforma.vxconsult.com.br/cliente/pesquisa-view.php?p=189371"
            },
            {
                "id": "189371",
                "cpf": "378.304.448-03",
                "data_pesquisa": "2025-05-22T15:38:12-03:00",
                "autorizacao_s3": "https://s3.sa-east-1.amazonaws.com/vx-consult-bucket-plataforma/pesquisas/autorizacao-189371.pdf",
                "status": "Conclu√≠do",
                "cavalo_placa": "AAA0000",
                "carreta1_placa": "",
                "carreta2_placa": null,
                "carreta3_placa": null,
                "perfil": "Aut√¥nomo",
                "validade": "2025-08-21T15:38:12-03:00",
                "dentro_validade": true,
                "dias_expirar": 7862400000,
                "pagina_renova": "https://plataforma.vxconsult.com.br/cliente/pesquisa-view.php?p=189371"
            },
            {
                "id": "189371",
                "cpf": "378.304.448-03",
                "data_pesquisa": "2025-05-22T15:38:12-03:00",
                "autorizacao_s3": "https://s3.sa-east-1.amazonaws.com/vx-consult-bucket-plataforma/pesquisas/autorizacao-189371.pdf",
                "status": "Conclu√≠do",
                "cavalo_placa": "AAA0000",
                "carreta1_placa": "",
                "carreta2_placa": "",
                "carreta3_placa": null,
                "perfil": "Aut√¥nomo",
                "validade": "2025-08-21T15:38:12-03:00",
                "dentro_validade": true,
                "dias_expirar": 7862400000,
                "pagina_renova": "https://plataforma.vxconsult.com.br/cliente/pesquisa-view.php?p=189371"
            },
            {
                "id": "189371",
                "cpf": "378.304.448-03",
                "data_pesquisa": "2025-05-22T15:38:12-03:00",
                "autorizacao_s3": "https://s3.sa-east-1.amazonaws.com/vx-consult-bucket-plataforma/pesquisas/autorizacao-189371.pdf",
                "status": "Conclu√≠do",
                "cavalo_placa": "AAA0000",
                "carreta1_placa": "",
                "carreta2_placa": "",
                "carreta3_placa": "",
                "perfil": "Aut√¥nomo",
                "validade": "2025-08-21T15:38:12-03:00",
                "dentro_validade": true,
                "dias_expirar": 7862400000,
                "pagina_renova": "https://plataforma.vxconsult.com.br/cliente/pesquisa-view.php?p=189371"
            },
            {
                "id": "188473",
                "cpf": "378.304.448-03",
                "data_pesquisa": "2024-08-08T15:53:37-03:00",
                "autorizacao_s3": "https://s3.sa-east-1.amazonaws.com/vx-consult-bucket-plataforma/pesquisas/autorizacao-188473.pdf",
                "status": "Conclu√≠do",
                "cavalo_placa": null,
                "carreta1_placa": null,
                "carreta2_placa": null,
                "carreta3_placa": null,
                "perfil": "Aut√¥nomo",
                "validade": "2024-11-07T15:53:37-03:00",
                "dentro_validade": false,
                "dias_expirar": 7862400000,
                "pagina_renova": "https://plataforma.vxconsult.com.br/cliente/pesquisa-view.php?p=188473"
            },
            {
                "id": "188325",
                "cpf": "378.304.448-03",
                "data_pesquisa": "2024-07-31T16:01:46-03:00",
                "autorizacao_s3": "https://s3.sa-east-1.amazonaws.com/vx-consult-bucket-plataforma/pesquisas/autorizacao-188325.pdf",
                "status": "Conclu√≠do",
                "cavalo_placa": null,
                "carreta1_placa": "GFY1G86",
                "carreta2_placa": "GFY1G86",
                "carreta3_placa": null,
                "perfil": "Aut√¥nomo",
                "validade": "2024-10-30T16:01:46-03:00",
                "dentro_validade": false,
                "dias_expirar": 7862400000,
                "pagina_renova": "https://plataforma.vxconsult.com.br/cliente/pesquisa-view.php?p=188325"
            }
        ]
    },
    "message": "Pesquisa encontrada"
}
                </code></pre>
        </div>

        <br>
        <h3>üîΩ √â poss√≠vel filtrar as pesquisas com esse CPF incluindo as placas a serem buscadas:</h3>
        <h4>Exemplo 2Ô∏è‚É£:</h4>
        <div class="codigo">
            <pre><code>
{
    "cpf": "378.304.448-03",
    "placas": [
        "AAA0000"
    ]
}
            </code></pre>
        </div>

        <br>
        <h4>Exemplo de resposta 2Ô∏è‚É£:</h4>
            <div class="codigo">
            <pre><code>
{
    "data": {
        "pesquisas": [
            {
                "id": "189371",
                "cpf": "378.304.448-03",
                "data_pesquisa": "2025-05-22T15:38:12-03:00",
                "autorizacao_s3": "https://s3.sa-east-1.amazonaws.com/vx-consult-bucket-plataforma/pesquisas/autorizacao-189371.pdf",
                "status": "Conclu√≠do",
                "cavalo_placa": "AAA0000",
                "carreta1_placa": "",
                "carreta2_placa": "",
                "carreta3_placa": "",
                "perfil": "Aut√¥nomo",
                "validade": "2025-08-21T15:38:12-03:00",
                "dentro_validade": true,
                "temporario": false,
                "pagina_renova": "https://plataforma.vxconsult.com.br/cliente/pesquisa-view.php?p=189371"
            }
        ]
    },
    "message": "Pesquisa encontrada"
}
            </code></pre>
        </div>
    </div>

    <br><br>
    <h2>üñ•Ô∏è Gerar Nova Consulta e Retornar o Laudo:</h2>
    <p><strong>[POST]</strong> /api/users-permissions/gerarLaudoConsulta</p>
    
    <br>
    <h4>Corpo (JSON) pesquisa: ID da pesquisa:</h4>
    <div class="codigo">
        <pre><code>
{
    "pesquisa": "188473"
}
            </code></pre>
    </div>
    <br>
    <h4>Exemplo de resposta (sucesso):</h4>
    <div class="codigo">
        <pre><code>
{
    "consulta": "181962",
    "laudo": "https://s3.sa-east-1.amazonaws.com/vx-consult-bucket-plataforma/consulta/autorizacao-consulta-181962.pdf",
    "validade": "2025-11-15T15:44:12-03:00"
}
            </code></pre>
    </div>
    <br>
    <h4>Exemplo de resposta (erro - pesquisa invalida ou pesquisa fora da data):</h4>
    <div class="codigo">
        <pre><code>
{
    "data": null,
    "error": {
        "status": 400,
        "name": "BadRequestError",
        "message": "Nenhuma pesquisa v√°lida encontrada para pesquisa 1893711",
        "details": {}
    }
}
            </code></pre>
    </div>
    <br><br>
    <div>
        <h2><strong>‚ôªÔ∏è Renovar pesquisa:</strong></h2>
        <p><strong>[POST]</strong> /api/users-permissions/renovarPesquisa</p>
        <br>
        <h4>Corpo de requisi√ß√£o (pesquisa precisa ser um ID v√°lido, retornado depois de consultar o CPF)</h4>
        <div class="codigo">
            <pre><code>
{
    "pesquisa": "189371"
}
            </code></pre>
        </div>
        <br>
        <h4>Exemplo de requisi√ß√£o (sucesso):</h4>
        <div class="codigo">
            <pre><code>
{
    "pesquisa": "207573",
    "pesquisaURL": "url",
    "message": "Pesquisa renovada com sucesso!"
}
                </code></pre>
        </div>
        <br>
        <h4>Exemplo de requisi√ß√£o (ID de pesquisa n√£o encontrada):</h4>
        <div class="codigo">
            <pre><code>
{
    "data": null,
    "error": {
        "status": 400,
        "name": "BadRequestError",
        "message": "Pesquisa n√£o encontrada",
        "details": {}
    }
}
                </code></pre>
        </div>
    </div>

    <div>
        <h2><strong>üîé Buscar padr√£o de pesquisa:</strong></h2>
        <p><strong>[GET]</strong> /api/users-permissions/buscaPadraoPesquisa</p>
        <br>

        <h4>Exemplo de resposta:</h4>
        <div class="codigo">
            <pre><code>
{
    "padrao": [
        {
            "id": "522",
            "titulo": "B√°sica"
        },
        {
            "id": "523",
            "titulo": "Completa"
        },
        {
            "id": "524",
            "titulo": "Completa RDO"
        }
    ]
}
                </code></pre>
        </div>
    </div>
    <br><br>
    <div>
        <h2><strong>üöö Criar pesquisa (at√© 3 carretas para cada pesquisa):</strong></h2>
        <p><strong>[POST]</strong> /api/users-permissions/criarPesquisa</p>
        <br>

        <h4>Enviar:</h4>
        <div class="codigo">
            <p>Padr√£o => ID de um padr√£o v√°lido retornado em</p>
            <pre><code>
    buscaPadraoPesquisa
                </code></pre>
        </div>
        <h4>Tipo_motorista:</h4>
        <div class="codigo">
            <pre><code>
    1: Autonomo
    2: RH
    3: Frota
    4: Agregado
                </code></pre>
        </div><br><br>
        <h4>Exemplo de requisi√ß√£o:</h4>
        <div class="codigo">
            <pre><code>
{
    "padrao": "524",
    "tipo_motorista": "1",
    "motorista": {
        "nome_completo": "TESTE CELSO",
        "data_nascimento": 441248610,
        "cpf": "37830444803",
        "rg": "1234250123",
        "rg_data_emissao": 1749863010,
        "rg_estado": "RS",
        "cnh": "02513123254",
        "cnh_categoria": "E",
        "cnh_vencimento": 1749517410,
        "cnh_orgao_emissor": "DETRAN",
        "cnh_cidade": "GARIBALDI",
        "cnh_estado": "RS",
        "cnh_primeira_habilitacao": 1032570210,
        "pai": "VILMAR TRENTIN",
        "mae": "LAIDIR EITELVEN\nTRENTIN",
        "cep": "99240000",
        "logradouro": "Distrito d Santa Barbara ",
        "numero": "1",
        "complemento": "",
        "bairro": "Interior ",
        "cidade": "S√£o Valentim do Sul",
        "estado": "RS",
        "telefone_residencial": "Vagner trentin ",
        "telefone_residencial_contato": "54999138845",
        "telefone_comercial": "",
        "telefone_comercial_contato": "",
        "telefone_referencia": "",
        "telefone_referencia_contato": "(54) 99658-1956"
    },
    "cavalo": {
        "nome_proprietario": "TRANS ETC LTDA",
        "rntc_proprietario": "0310204500",
        "cpf_cnpj_proprietario": "31.701.111/0001-02",
        "cep_proprietario": "0100100",
        "logradouro_proprietario": "teste",
        "numero_proprietario": "11",
        "complemento_proprietario": "Lado Esquerdo",
        "bairro_proprietario": "S√©",
        "cidade_proprietario": "S√£o Paulo",
        "estado_proprietario": "SP",
        "telefone_residencial_proprietario": "Etc ",
        "telefone_residencial_contato_proprietario": "(54) 98125-7772",
        "telefone_comercial_proprietario": "Abc ",
        "telefone_comercial_contato_proprietario": "(54) 98125-7772",
        "placa": "AAA0A00",
        "cidade_emplacamento": "GARIBALDI",
        "estado_emplacamento": "RS",
        "renavam": "0123389236",
        "marca": "SCANIA",
        "modelo": "R460 A6X2",
        "chassi": "9XXX6X200R4039972",
        "ano": "2024",
        "cor": "AZUL"
    },
    "carretas": [
        {
            "nome_proprietario": "TRANS ETC LTDA",
            "rntc_proprietario": "0310204500",
            "cpf_cnpj_proprietario": "31.701.111/0001-02",
            "cep_proprietario": "0100100",
            "logradouro_proprietario": "teste",
            "numero_proprietario": "11",
            "complemento_proprietario": "Lado Esquerdo",
            "bairro_proprietario": "S√©",
            "cidade_proprietario": "S√£o Paulo",
            "estado_proprietario": "SP",
            "telefone_residencial_proprietario": "Etc ",
            "telefone_residencial_contato_proprietario": "(54) 98125-7772",
            "telefone_comercial_proprietario": "Abc ",
            "telefone_comercial_contato_proprietario": "(54) 98125-7772",
            "placa": "AAA0A00",
            "cidade_emplacamento": "GARIBALDI",
            "estado_emplacamento": "RS",
            "renavam": "0123389236",
            "marca": "SCANIA",
            "modelo": "R460 A6X2",
            "chassi": "9XXX6X200R4039972",
            "ano": "2024",
            "cor": "AZUL"
        }
    ],
    "arquivos": [
        {
            "title": "Comprovante de Endereco",
            "path": "URL_PUBLIC"
        },
        {
            "title": "CNH",
            "path": "URL_PUBLIC"
        },
        {
            "title": "Ve√≠culo",
            "path": "URL_PUBLIC"
        },
        {
            "title": "Documento Cavalo",
            "path": "URL_PUBLIC"
        },
        {
            "title": "Documento Carreta",
            "path": "URL_PUBLIC"
        }
    ]
}
                </code></pre>
        </div><br><br>
        <h4>Exemplo de sucesso:</h4>
        <div class="codigo">
            <pre><code>
{
    "pesquisa": "901444",
    "message": "Pesquisa criada com sucesso"
}
                </code></pre>
        </div>
<br><br>
        <h4>Exemplo de falha:</h4>
        <div class="codigo">
            <pre><code>
{
    "pesquisa": false,
    "message": "Erro: motorista j√° com pesquisa ativa"
}
                </code></pre>
        </div>
<br><br>
<h2><strong>üíª Acompanhamento de pesquisa ativa:</strong></h2>
        <p><strong>[POST]</strong> api/users-permissions/pesquisaAtiva</p>
        <br>

<h4>Exemplo de requisi√ß√£o:</h4>
        <div class="codigo">
            <pre><code>
{
    "pesquisa": "207735"
}
                </code></pre>
        </div>
        <br><br>
<h4>Exemplo de resposta:</h4>
        <div class="codigo">
            <pre><code>
{
    "pesquisa": {
        "id": "207735",
        "cpf": "378.304.448-03",
        "data_pesquisa": "1751054896",
        "autorizacao_s3": null,
        "status": "Em An√°lise",
        "tipo": "1",
        "cavalo_placa": "AAA0A00",
        "carreta1_placa": "AAA0A00",
        "carreta2_placa": "AAA0A00",
        "carreta3_placa": "AAA0A00",
        "perfil": "Aut√¥nomo""data": "2025-05-22T15:38:12-03:00""data_validade": "2025-12-25T15:44:12-03:00"
    }
}
                </code></pre>
        </div>
<br><br>
<h4>Exemplo de resposta (erro):</h4>
        <div class="codigo">
            <pre><code>
{
    "pesquisa": false,
    "message": "Pesquisa inexistente"
}
                </code></pre>
        </div>

        <br><br>
<h2><strong>#Ô∏è‚É£ Upload Base64:</strong></h2>
        <p><strong>[POST]</strong> /api/users-permissions/uploadBase64</p>
        <br>

<h4>Exemplo de requisi√ß√£o:</h4>
        <div class="codigo">
            <pre><code>
{
    "fileName": "Teste",
    "mimeType": "image/png",
    "file": "/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAM"
}
                </code></pre>
        </div>
        <div class="bloco">
            fileName -> Nome do arquivo <br>
            mimeType -> mime type <br>
            file -> dados em base64 sem o mime / base64 (apenas dados depois da v√≠rgula)
        </div>
        <br><br>
<h4>Exemplo de resposta:</h4>
        <div class="codigo">
            <pre><code>
{
    "url": "https://vx-consult-bucket-plataforma.s3.sa-east-1.amazonaws.com/strapi/Teste_226a6c477d.png"
}

                </code></pre>
        </div>
<br><br>
<h4>Exemplo de resposta (erro):</h4>
        <div class="codigo">
            <pre><code>
{
    "data": null,
    "error": {
        "status": 400,
        "name": "BadRequestError",
        "message": "Por favor enviar o par√¢metro mimeType",
        "details": {}
    }
}
                </code></pre>
        </div>
    </div>
</body>

</html>